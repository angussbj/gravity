(this.webpackJsonpgravity=this.webpackJsonpgravity||[]).push([[0],{107:function(t,e,n){},115:function(t,e,n){},120:function(t,e,n){},125:function(t,e,n){"use strict";n.r(e);var i=n(1),r=n.n(i),a=n(24),o=n.n(a),c=(n(107),n(14)),s=n(15),l=n(9),u=n(18),d=n(7);function b(t){var e=t.points,n=t.color,r=void 0===n?u.c.random():n,a=Object(i.useRef)(new l.BufferGeometry).current;return a.setFromPoints(e),Object(d.jsx)("line_",{geometry:a,children:Object(d.jsx)("lineBasicMaterial",{attach:"material",color:r.toString(),linewidth:10,linecap:"round",linejoin:"round"})})}Object(s.h)({Line_:l.Line});var j=n(27);function h(){var t=Object(j.useUniverse)();return Object(d.jsx)(d.Fragment,{children:t.state.map((function(t){return Object(d.jsx)(b,{points:t.path,color:t.color},t.id)}))})}var v=n(56),f=function(){return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)("ambientLight",{intensity:1})})},x=n(145);function p(t){var e=t.children;return Object(d.jsx)("div",{style:{position:"absolute",left:0,right:0,top:0,bottom:0},children:Object(d.jsxs)(v.a,{style:{background:u.c.BLACK.toString()},camera:{position:[0,5,0]},shadows:!0,children:[Object(d.jsx)("gridHelper",{args:[20,20]}),Object(d.jsx)(f,{}),e,Object(d.jsx)(x.a,{autoRotate:!1})]})})}var O=n(21),g=n(22),m=n(94),S=n(47),y=n(37),w=n(30),_=n(35);function C(t){var e,n,i=t.label,r=t.value,a=t.onChange,o=t.style;return Object(d.jsxs)(w.a,{style:o,children:[Object(d.jsx)(_.a,{label:i}),Object(d.jsx)(y.a,{value:r,onChange:a,style:{width:null!==(e=null===o||void 0===o?void 0:o.width)&&void 0!==e?e:62,maxWidth:null!==(n=null===o||void 0===o?void 0:o.width)&&void 0!==n?n:62}})]})}var F,k=n(39),I=n(143),L=n(93);function U(t){var e=t.bodyId,n=t.style,r=Object(j.useUniverse)(),a=Object(i.useCallback)((function(){r.removeBody(e),r.update()}),[r]);return Object(d.jsx)(k.a,{onClick:a,style:n,children:Object(d.jsx)(I.a,{title:"Remove body",children:Object(d.jsx)("div",{children:Object(d.jsx)(L.c,{size:16})})})})}function z(t){var e,n=t.body,i=t.index,r=Object(j.useUniverse)();return Object(d.jsxs)(D,{children:[Object(d.jsxs)(u.e,{style:{justifyContent:"space-between"},children:[Object(d.jsxs)(u.e,{style:{gap:4},children:[Object(d.jsx)(C,{label:"Name",value:null!==(e=n.name)&&void 0!==e?e:"Body ".concat(i+1),onChange:function(t){n.name=t.replace(/[_*]/,""),r.setInitial("name",n.id,t),r.render()}}),Object(d.jsx)(u.b,{label:"Color",value:n.color,onChange:function(t){n.color=t,r.setInitial("color",n.id,t),r.render()}})]}),Object(d.jsx)(U,{bodyId:n.id})]}),Object(d.jsx)(u.f,{label:"Position",value:n.x,onSubmitOrBlur:r.update}),Object(d.jsx)(u.f,{label:"Velocity",value:n.v,onSubmitOrBlur:r.update}),Object(d.jsxs)(u.e,{style:{gap:4},children:[Object(d.jsx)(u.d,{label:"Mass",value:n.m,onSubmitOrBlur:function(t){r.setInitial("m",n.id,t),r.update()}}),Object(d.jsx)(I.a,{title:"The frame of reference follows the center of mass of selected bodies",enterDelay:600,enterNextDelay:400,children:Object(d.jsx)("div",{children:Object(d.jsx)(u.a,{label:"Frame",value:n.frameFollows,onChange:function(t){r.setInitial("frameFollows",n.id,t),r.update()}})})})]})]})}var B,E,D=g.a.div(F||(F=Object(O.a)(["\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n  margin-left: 8px;\n"])));function P(){var t=Object(j.useUniverse)(),e=Object(i.useCallback)((function(){t.addBody(),t.update()}),[]);return Object(d.jsx)(k.a,{onClick:e,style:{},children:Object(d.jsx)(I.a,{title:"Add new body",children:Object(d.jsx)("div",{children:Object(d.jsx)(L.a,{})})})})}function T(){var t=Object(j.useUniverse)();return Object(d.jsxs)(G,{style:{color:u.c.LIGHT.toString(),fontSize:12},children:["Initial state:",t.state.map((function(t,e){return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(z,{body:t,index:e},t.id),Object(d.jsx)(V,{},t.id+"separator")]})})),Object(d.jsx)(P,{},"add_body")]})}var H,R,G=g.a.div(B||(B=Object(O.a)(["\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n"]))),V=g.a.div(E||(E=Object(O.a)(["\n  border-bottom: 1px solid ",";\n  align-self: stretch;\n  margin-left: 40px;\n  margin-right: 40px;\n"])),u.c.LIGHT.fade(.5).toString());function W(){var t=Object(j.useUniverse)();return Object(d.jsxs)(K,{style:{color:u.c.LIGHT.toString(),fontSize:12},children:["Path extrapolation parameters:",Object(d.jsxs)(M,{children:[Object(d.jsx)(u.d,{label:"Step count",value:t.pathingDepth,onSubmitOrBlur:function(e){t.pathingDepth=e,t.update()}}),Object(d.jsx)(u.d,{label:"Step size",value:t.pathingStepSize,onSubmitOrBlur:function(e){t.pathingStepSize=e,t.update()}})]})]})}var A,K=g.a.div(H||(H=Object(O.a)(["\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n"]))),M=Object(g.a)(u.e)(R||(R=Object(O.a)(["\n  gap: 4px;\n  margin-left: 8px;\n"])));function N(){var t=Object(S.b)().height,e=Object(i.useState)(!0),n=Object(c.a)(e,2),r=n[0],a=n[1];return r?Object(d.jsxs)(Y,{style:{maxHeight:t-88},children:[Object(d.jsx)(k.a,{onClick:function(){return a(!1)},style:{position:"absolute",top:0,right:0},children:Object(d.jsx)(L.b,{})}),Object(d.jsx)(T,{}),Object(d.jsx)(W,{})]}):Object(d.jsx)(k.a,{onClick:function(){return a(!0)},style:{position:"absolute",top:16,right:16},children:Object(d.jsx)(m.a,{})})}var Y=g.a.div(A||(A=Object(O.a)(["\n  position: absolute;\n  top: 16px;\n  right: 16px;\n  width: 240px;\n  min-height: 100px;\n  background-color: ",";\n  border: 1px solid ",";\n  overflow-y: auto;\n  overflow-x: auto;\n  scroll-behaviour: smooth;\n  padding: 12px;\n  padding-bottom: 40px;\n  padding-top: 16px;\n  display: flex;\n  flex-direction: column;\n  gap: 32px;\n"])),u.c.DARK.toString(),u.c.LIGHT.toString());var J=function(){var t=Object(i.useState)(!1),e=Object(c.a)(t,2),n=(e[0],e[1]),r=Object(i.useCallback)((function(){return n((function(t){return!t}))}),[]),a=Object(i.useState)((function(){return new j.Universe(r)})),o=Object(c.a)(a,1)[0];return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)(j.UniverseContextProvider,{universe:o,children:[Object(d.jsx)(p,{children:Object(d.jsx)(h,{})}),Object(d.jsx)(N,{})]})})};o.a.render(Object(d.jsx)(r.a.StrictMode,{children:Object(d.jsx)(J,{})}),document.getElementById("root"))},18:function(t,e,n){"use strict";n.d(e,"c",(function(){return i.a})),n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return p})),n.d(e,"f",(function(){return _})),n.d(e,"d",(function(){return C})),n.d(e,"e",(function(){return y}));var i=n(31),r=n(1),a=(n(115),n(30)),o=n(35),c=n(7);function s(t){var e=t.label,n=t.value,r=t.onChange,s=t.style;return Object(c.jsxs)(a.a,{style:s,children:[Object(c.jsx)(o.a,{label:e}),Object(c.jsx)("input",{type:"checkbox",checked:n,onChange:function(t){return r(t.target.checked)},style:{backgroundColor:i.a.DARK.toString(),color:"red",accentColor:"green"}})]})}var l,u,d=n(21),b=n(14),j=n(33),h=n.n(j),v=n(90),f=n(22),x=n(39);function p(t){var e=t.label,n=t.value,i=t.onChange,s=t.style,l=Object(r.useState)(!1),u=Object(b.a)(l,2),d=u[0],j=u[1],f=Object(r.useRef)(null);return Object(r.useEffect)((function(){var t=function(t){"Escape"===t.key&&j(!1)};window.addEventListener("keydown",t);var e=function(t){f.current&&!f.current.contains(t.target)&&j(!1)};return window.addEventListener("mousedown",e),function(){window.removeEventListener("keydown",t),window.removeEventListener("mousedown",e)}}),[f,j]),Object(c.jsxs)(a.a,{style:s,children:[Object(c.jsx)(o.a,{label:e}),Object(c.jsx)(x.a,{onClick:function(){return j((function(t){return!t}))},style:{marginBottom:-8,marginTop:-4,marginLeft:-4},children:Object(c.jsx)(g,{style:{backgroundColor:n.toString()}})}),Object(c.jsx)(m,{children:d&&Object(c.jsx)("div",{ref:f,style:{position:"absolute",left:-60,zIndex:1},children:Object(c.jsx)(v.a,{color:n.hex(),onChange:function(t){t.includes("NaN")||i(h()(t))}})})})]})}var O,g=f.a.div(l||(l=Object(d.a)(["\n  width: 12px;\n  height: 12px;\n"]))),m=f.a.div(u||(u=Object(d.a)(["\n  width: 1px;\n  height: 1px;\n  overflow: visible;\n  position: relative;\n"]))),S=n(37),y=f.a.div(O||(O=Object(d.a)(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n"])));function w(t){if(!t)return t;var e="-"===t[0],n=t.replace(/[^0-9.]/g,"").split(".");return(e?"-":"")+(n.length>=2?n[0]+"."+n.slice(1).join(""):n[0])}function _(t){var e=t.label,n=t.value,i=t.onSubmitOrBlur,s=t.style,l=Object(r.useState)(n.x.toString()),u=Object(b.a)(l,2),d=u[0],j=u[1],h=Object(r.useState)(n.y.toString()),v=Object(b.a)(h,2),f=v[0],x=v[1],p=Object(r.useState)(n.z.toString()),O=Object(b.a)(p,2),g=O[0],m=O[1];Object(r.useEffect)((function(){d!=n.x.toString()&&j(n.x.toString()),f!=n.y.toString()&&x(n.y.toString()),g!=n.z.toString()&&m(n.z.toString())}),[n.x,n.y,n.z]);var _=Object(r.useCallback)((function(){j(d||"0"),x(f||"0"),m(g||"0"),n.setX(parseFloat(d||"0")),n.setY(parseFloat(f||"0")),n.setZ(parseFloat(g||"0")),i(n)}),[n,d,f,g,j,x,m]);return Object(c.jsxs)(a.a,{style:s,children:[Object(c.jsx)(o.a,{label:e+" (x, y, z)"}),Object(c.jsxs)(y,{children:[Object(c.jsx)(S.a,{value:d,onChange:function(t){j(w(t))},onSubmit:_,onBlur:_,style:{width:62,maxWidth:62}}),Object(c.jsx)(S.a,{value:f,onChange:function(t){x(w(t))},onSubmit:_,onBlur:_,style:{marginLeft:4,width:62,maxWidth:62}}),Object(c.jsx)(S.a,{value:g,onChange:function(t){m(w(t))},onSubmit:_,onBlur:_,style:{marginLeft:4,width:62,maxWidth:62}})]})]})}function C(t){var e,n,i=t.label,s=t.value,l=t.onSubmitOrBlur,u=t.style,d=Object(r.useState)(s.toString()),j=Object(b.a)(d,2),h=j[0],v=j[1];Object(r.useEffect)((function(){h!=s.toString()&&v(s.toString())}),[s]);var f=Object(r.useCallback)((function(){v(h||"0"),l(parseFloat(h||"0"))}),[s,h,v]);return Object(c.jsxs)(a.a,{style:u,children:[Object(c.jsx)(o.a,{label:i}),Object(c.jsx)(S.a,{value:h,onChange:function(t){v(w(t))},onSubmit:f,onBlur:f,style:{width:null!==(e=null===u||void 0===u?void 0:u.width)&&void 0!==e?e:62,maxWidth:null!==(n=null===u||void 0===u?void 0:u.width)&&void 0!==n?n:62}})]})}},27:function(t,e,n){"use strict";var i=n(81);n.o(i,"Universe")&&n.d(e,"Universe",(function(){return i.Universe})),n.o(i,"UniverseContextProvider")&&n.d(e,"UniverseContextProvider",(function(){return i.UniverseContextProvider})),n.o(i,"useUniverse")&&n.d(e,"useUniverse",(function(){return i.useUniverse}));var r=n(55);n.d(e,"Universe",(function(){return r.a}));var a=n(82);n.d(e,"UniverseContextProvider",(function(){return a.a})),n.d(e,"useUniverse",(function(){return a.b}))},30:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i,r=n(21),a=n(22).a.div(i||(i=Object(r.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n"])))},31:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var i=n(33),r=n.n(i),a=n(47),o={BLACK:r()("#000000"),DARK:r()("#101113"),LIGHT_GREY:r()("#8C8D8F"),LIGHT:r()("#DCDDDF"),WHITE:r()("#FFFFFF"),random:function(){return r.a.hsv(Object(a.a)(0,360),Object(a.a)(50,100),Object(a.a)(50,100))}}},35:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var i,r=n(21),a=(n(1),n(22)),o=n(31),c=n(7);function s(t){var e=t.label;return e?Object(c.jsx)(l,{children:e}):null}var l=a.a.div(i||(i=Object(r.a)(["\n  color: ",";\n  font-size: 10px;\n"])),o.a.LIGHT.toString())},37:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var i=n(11),r=n(1),a=(n(120),n(31)),o=n(7);function c(t){var e=t.value,n=t.onChange,c=t.style,s=t.focusFirstRender,l=t.onSubmit,u=t.onBlur,d=t.ariaLabel,b=Object(r.useRef)(null);return Object(r.useEffect)((function(){var t;s&&(null===(t=b.current)||void 0===t||t.focus())}),[]),Object(o.jsx)("input",{ref:b,value:e,className:"input",onChange:function(t){n(t.target.value)},onBlur:u,onKeyDown:function(t){"Enter"===t.key&&(null===l||void 0===l||l())},"aria-label":d,style:Object(i.a)({flex:1,backgroundColor:a.a.DARK.toString(),borderColor:a.a.LIGHT_GREY.toString(),color:a.a.LIGHT.toString()},c)})}},39:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var i=n(11),r=n(14),a=n(28),o=n(1),c=n(144);var s=n(31),l=n(7);function u(t){var e=t.color,n=void 0===e?s.a.LIGHT:e,u=t.disabled,d=t.style,b=t.children,j=Object(a.a)(t,["color","disabled","style","children"]),h=function(){var t=Object(o.useState)(!1),e=Object(r.a)(t,2),n=e[0],i=e[1],a=Object(o.useRef)(null),c=function(){return i(!0)},s=function(){return i(!1)};return Object(o.useEffect)((function(){var t=a.current;if(t)return t.addEventListener("mouseover",c),t.addEventListener("mouseout",s),function(){t.removeEventListener("mouseover",c),t.removeEventListener("mouseout",s)}}),[]),[a,n]}(),v=Object(r.a)(h,2),f=v[0],x=v[1],p=u?.4:x?.15:0;return Object(l.jsx)(c.a,Object(i.a)(Object(i.a)({style:Object(i.a)({color:null===n||void 0===n?void 0:n.fade(p).toString()},d),ref:f,disabled:u},j),{},{children:b}))}},47:function(t,e,n){"use strict";function i(t,e){return Math.floor(Math.random()*(e-t)+t)}n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o}));var r=n(14),a=n(1);function o(){var t=Object(a.useState)({width:window.innerWidth,height:window.innerHeight}),e=Object(r.a)(t,2),n=e[0],i=e[1];return Object(a.useEffect)((function(){function t(){i({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",t),function(){return window.removeEventListener("resize",t)}}),[]),n}},55:function(t,e,n){"use strict";n.d(e,"a",(function(){return v}));var i=n(11),r=n(2),a=n(5),o=n(9),c=n(91),s=n(18),l=n(33),u=n.n(l);function d(t){var e;return[t.id,null!==(e=t.name)&&void 0!==e?e:"",t.color.hex(),t.x0.x.toString(),t.x0.y.toString(),t.x0.z.toString(),t.v0.x.toString(),t.v0.y.toString(),t.v0.z.toString(),t.m.toString(),(+t.frameFollows).toString()].join("_")}function b(t){var e=t.split("_");return{id:e[0],name:e[1],color:u()(e[2]),x0:new o.Vector3(parseFloat(e[3]),parseFloat(e[4]),parseFloat(e[5])),v0:new o.Vector3(parseFloat(e[6]),parseFloat(e[7]),parseFloat(e[8])),m:parseFloat(e[9]),frameFollows:Boolean(parseInt(e[10]))}}function j(t,e){return null!==t?parseFloat(t):e}var h=[{stateString:"b0__#23E422_0_0_0_-0.001_0_-0.191_100_0*b1__#0CF2CB_2.03_0_0_0_3_6_1_0*b2__#F74376_1.97_0_0_0_-3_6_1_0*b3__#9E0885_-2_1_0_0_0_7_1_0*b4__#82681F_-2_1_0.012_9_0_7_0.01_0"}],v=function(){function t(e){Object(r.a)(this,t),this.render=e,this.state0=[],this.state=[],this.t=0,this.pathingDepth=5e3,this.pathingStepSize=.001,this.bodyIdCounter=0,this.setFromUrl(),this.setToInitialState(),this.calculatePaths(),Object(c.a)(this)}return Object(a.a)(t,[{key:"addBody",value:function(t){this.state0.push(Object(i.a)(Object(i.a)({x0:new o.Vector3(0,0,0),v0:new o.Vector3(0,0,0),m:0,color:s.c.random(),frameFollows:!1},t),{},{id:"b".concat(this.bodyIdCounter)})),this.bodyIdCounter+=1,this.updateUrl()}},{key:"removeBody",value:function(t){this.state0=this.state0.filter((function(e){return e.id!==t})),this.updateUrl()}},{key:"setInitial",value:function(t,e,n){var i=this.state0.find((function(t){return t.id===e}));i&&(i[t]=n),this.updateUrl()}},{key:"updateUrl",value:function(){var t,e,n=new URL(window.location.toString());n.searchParams.set("bodies",(t=this.state0,e=d,t.map(e).join("*"))),n.searchParams.set("pathingStepSize",this.pathingStepSize.toString()),n.searchParams.set("pathingDepth",this.pathingDepth.toString()),window.history.pushState({},"",n)}},{key:"setInitialStateFromString",value:function(t){this.state0=function(t,e){var n;return null!==(n=null===t||void 0===t?void 0:t.split("*").map(e))&&void 0!==n?n:[]}(t,b),this.bodyIdCounter=this.state0.length}},{key:"setFromUrl",value:function(){var t=new URLSearchParams(window.location.search);this.setInitialStateFromString(t.get("bodies")),0===this.state0.length&&this.setInitialStateFromString(h[0].stateString),this.pathingStepSize=j(t.get("pathingStepSize"),.001),this.pathingDepth=j(t.get("pathingDepth"),5e3)}},{key:"update",value:function(){this.setToInitialState(),this.calculatePaths(),this.updateUrl(),this.render()}},{key:"setToInitialState",value:function(){this.state=this.state0.map((function(t){return Object(i.a)(Object(i.a)({},t),{},{x:t.x0,v:t.v0,path:[]})}))}},{key:"calculatePaths",value:function(){for(var t,e,n,i,r=new o.Vector3(0,0,0),a=this.state.map((function(t){return{x:t.x.clone(),v:t.v.clone(),m:t.m,dx:new o.Vector3(0,0,0),dv:new o.Vector3(0,0,0)}})),c=new o.Vector3(0,0,0),s=new o.Vector3(0,0,0),l=this.pathingStepSize,u=0;u<this.pathingDepth;u++){for(var d=0;d<a.length;d++)a[d].dx.copy(r),a[d].dv.copy(r);for(var b=0;b<a.length;b++)for(var j=b+1;j<a.length;j++)c.copy(a[j].x).sub(a[b].x),0!=(e=c.length())&&(t=1*l/(e*e),c.normalize().multiplyScalar(t*a[j].m),a[b].dv.add(c),c.normalize().multiplyScalar(-t*a[b].m),a[j].dv.add(c));s.setLength(0),n=0,i=0;for(var h=0;h<a.length;h++)c.copy(a[h].v).multiplyScalar(l),a[h].dx.add(c),i=Math.max(a[h].dx.length(),i),this.state[h].frameFollows&&(s.add(a[h].x.clone().multiplyScalar(a[h].m)),n+=a[h].m);if(0!==n&&s.divideScalar(n),i>2*this.pathingStepSize||i<this.pathingStepSize/2)l*=this.pathingStepSize/i;else for(var v=0;v<a.length;v++)a[v].v.add(a[v].dv),a[v].x.add(a[v].dx),this.state[v].path.push(a[v].x.clone().sub(s))}}}]),t}()},81:function(t,e){},82:function(t,e,n){"use strict";n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return s}));var i=n(1),r=n(55),a=n(7),o=Object(i.createContext)(new r.a((function(){})));function c(t){var e=t.children,n=t.universe;return Object(a.jsx)(o.Provider,{value:n,children:e})}function s(){return Object(i.useContext)(o)}}},[[125,1,2]]]);
//# sourceMappingURL=main.8355ae29.chunk.js.map