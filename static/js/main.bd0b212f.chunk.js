(this.webpackJsonpgravity=this.webpackJsonpgravity||[]).push([[0],{109:function(t,e,n){},117:function(t,e,n){},122:function(t,e,n){},127:function(t,e,n){"use strict";n.r(e);var i=n(1),r=n.n(i),o=n(24),s=n.n(o),a=(n(109),n(14)),c=n(15),l=n(9),u=n(18),h=n(7);function d(t){var e=t.points,n=t.color,r=void 0===n?u.c.random():n,o=Object(i.useRef)(new l.BufferGeometry).current;return o.setFromPoints(e),Object(h.jsx)("line_",{geometry:o,children:Object(h.jsx)("lineBasicMaterial",{attach:"material",color:r.toString(),linewidth:10,linecap:"round",linejoin:"round"})})}Object(c.h)({Line_:l.Line});var b=n(27);function f(){var t=Object(b.useUniverse)();return Object(h.jsx)(h.Fragment,{children:t.state.map((function(t){return Object(h.jsx)(d,{points:t.path,color:t.color},t.id)}))})}var j=n(57),p=function(){return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("ambientLight",{intensity:1})})},v=n(147);function g(t){var e=t.children;return Object(h.jsx)("div",{style:{position:"absolute",left:0,right:0,top:0,bottom:0},children:Object(h.jsxs)(j.a,{style:{background:u.c.BLACK.toString()},camera:{position:[0,5,0]},shadows:!0,children:[Object(h.jsx)("gridHelper",{args:[20,20]}),Object(h.jsx)(p,{}),e,Object(h.jsx)(v.a,{autoRotate:!1})]})})}var O=n(21),x=n(22),m=n(96),y=n(48),S=n(37),w=n(30),k=n(35);function _(t){var e,n,i=t.label,r=t.value,o=t.onChange,s=t.style;return Object(h.jsxs)(w.a,{style:s,children:[Object(h.jsx)(k.a,{label:i}),Object(h.jsx)(S.a,{value:r,onChange:o,style:{width:null!==(e=null===s||void 0===s?void 0:s.width)&&void 0!==e?e:62,maxWidth:null!==(n=null===s||void 0===s?void 0:s.width)&&void 0!==n?n:62}})]})}var C,F=n(39),z=n(145),I=n(95);function L(t){var e=t.bodyId,n=t.style,r=Object(b.useUniverse)(),o=Object(i.useCallback)((function(){r.removeBody(e),r.update()}),[r]);return Object(h.jsx)(F.a,{onClick:o,style:n,children:Object(h.jsx)(z.a,{title:"Remove body",children:Object(h.jsx)("div",{children:Object(h.jsx)(I.c,{size:16})})})})}function E(t){var e,n=t.body,i=t.index,r=Object(b.useUniverse)();return Object(h.jsxs)(T,{children:[Object(h.jsxs)(u.e,{style:{justifyContent:"space-between"},children:[Object(h.jsxs)(u.e,{style:{gap:4},children:[Object(h.jsx)(_,{label:"Name",value:null!==(e=n.name)&&void 0!==e?e:"Body ".concat(i+1),onChange:function(t){n.name=t.replace(/[_*]/,""),r.setInitial("name",n.id,t),r.render()}}),Object(h.jsx)(u.b,{label:"Color",value:n.color,onChange:function(t){n.color=t,r.setInitial("color",n.id,t),r.render()}})]}),Object(h.jsx)(L,{bodyId:n.id})]}),Object(h.jsx)(u.f,{label:"Position",value:n.x,onSubmitOrBlur:r.update}),Object(h.jsx)(u.f,{label:"Velocity",value:n.v,onSubmitOrBlur:r.update}),Object(h.jsxs)(u.e,{style:{gap:4},children:[Object(h.jsx)(u.d,{label:"Mass",value:n.m,onSubmitOrBlur:function(t){r.setInitial("m",n.id,t),r.update()}}),Object(h.jsx)(z.a,{title:"The frame of reference follows the center of mass of selected bodies",enterDelay:600,enterNextDelay:400,children:Object(h.jsx)("div",{children:Object(h.jsx)(u.a,{label:"Frame",value:n.frameFollows,onChange:function(t){r.setInitial("frameFollows",n.id,t),r.update()}})})})]})]})}var U,B,T=x.a.div(C||(C=Object(O.a)(["\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n  margin-left: 8px;\n"])));function P(){var t=Object(b.useUniverse)(),e=Object(i.useCallback)((function(){t.addBody(),t.update()}),[]);return Object(h.jsx)(F.a,{onClick:e,style:{},children:Object(h.jsx)(z.a,{title:"Add new body",children:Object(h.jsx)("div",{children:Object(h.jsx)(I.a,{})})})})}function D(){var t=Object(b.useUniverse)();return Object(h.jsxs)(H,{style:{color:u.c.LIGHT.toString(),fontSize:12},children:["Initial state:",t.state.map((function(t,e){return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(E,{body:t,index:e},t.id),Object(h.jsx)(R,{},t.id+"separator")]})})),Object(h.jsx)(P,{},"add_body")]})}var G,V,H=x.a.div(U||(U=Object(O.a)(["\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n"]))),R=x.a.div(B||(B=Object(O.a)(["\n  border-bottom: 1px solid ",";\n  align-self: stretch;\n  margin-left: 40px;\n  margin-right: 40px;\n"])),u.c.LIGHT.fade(.5).toString());function M(){var t=Object(b.useUniverse)();return Object(h.jsxs)(A,{style:{color:u.c.LIGHT.toString(),fontSize:12},children:["Path extrapolation parameters:",Object(h.jsxs)(K,{children:[Object(h.jsx)(u.d,{label:"Step count",value:t.pathingDepth,onSubmitOrBlur:function(e){t.pathingDepth=e,t.update()}}),Object(h.jsx)(u.d,{label:"Step size",value:t.pathingStepSize,onSubmitOrBlur:function(e){t.pathingStepSize=e,t.update()}})]})]})}var W,A=x.a.div(G||(G=Object(O.a)(["\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n"]))),K=Object(x.a)(u.e)(V||(V=Object(O.a)(["\n  gap: 4px;\n  margin-left: 8px;\n"])));function N(){var t=Object(y.b)().height,e=Object(i.useState)(!0),n=Object(a.a)(e,2),r=n[0],o=n[1];return r?Object(h.jsxs)(X,{style:{maxHeight:t-88},children:[Object(h.jsx)(F.a,{onClick:function(){return o(!1)},style:{position:"absolute",top:0,right:0},children:Object(h.jsx)(I.b,{})}),Object(h.jsx)(D,{}),Object(h.jsx)(M,{})]}):Object(h.jsx)(F.a,{onClick:function(){return o(!0)},style:{position:"absolute",top:16,right:16},children:Object(h.jsx)(m.a,{})})}var X=x.a.div(W||(W=Object(O.a)(["\n  position: absolute;\n  top: 16px;\n  right: 16px;\n  width: 240px;\n  min-height: 100px;\n  background-color: ",";\n  border: 1px solid ",";\n  overflow-y: auto;\n  overflow-x: auto;\n  scroll-behaviour: smooth;\n  padding: 12px;\n  padding-bottom: 40px;\n  padding-top: 16px;\n  display: flex;\n  flex-direction: column;\n  gap: 32px;\n"])),u.c.DARK.toString(),u.c.LIGHT.toString());var Y=function(){var t=Object(i.useState)(!1),e=Object(a.a)(t,2),n=(e[0],e[1]),r=Object(i.useCallback)((function(){return n((function(t){return!t}))}),[]),o=Object(i.useState)((function(){return new b.Universe(r)})),s=Object(a.a)(o,1)[0];return Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)(b.UniverseContextProvider,{universe:s,children:[Object(h.jsx)(g,{children:Object(h.jsx)(f,{})}),Object(h.jsx)(N,{})]})})};s.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(Y,{})}),document.getElementById("root"))},18:function(t,e,n){"use strict";n.d(e,"c",(function(){return i.a})),n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return g})),n.d(e,"f",(function(){return k})),n.d(e,"d",(function(){return _})),n.d(e,"e",(function(){return S}));var i=n(31),r=n(1),o=(n(117),n(30)),s=n(35),a=n(7);function c(t){var e=t.label,n=t.value,r=t.onChange,c=t.style;return Object(a.jsxs)(o.a,{style:c,children:[Object(a.jsx)(s.a,{label:e}),Object(a.jsx)("input",{type:"checkbox",checked:n,onChange:function(t){return r(t.target.checked)},style:{backgroundColor:i.a.DARK.toString(),color:"red",accentColor:"green"}})]})}var l,u,h=n(21),d=n(14),b=n(33),f=n.n(b),j=n(91),p=n(22),v=n(39);function g(t){var e=t.label,n=t.value,i=t.onChange,c=t.style,l=Object(r.useState)(!1),u=Object(d.a)(l,2),h=u[0],b=u[1],p=Object(r.useRef)(null);return Object(r.useEffect)((function(){var t=function(t){"Escape"===t.key&&b(!1)};window.addEventListener("keydown",t);var e=function(t){p.current&&!p.current.contains(t.target)&&b(!1)};return window.addEventListener("mousedown",e),function(){window.removeEventListener("keydown",t),window.removeEventListener("mousedown",e)}}),[p,b]),Object(a.jsxs)(o.a,{style:c,children:[Object(a.jsx)(s.a,{label:e}),Object(a.jsx)(v.a,{onClick:function(){return b((function(t){return!t}))},style:{marginBottom:-8,marginTop:-4,marginLeft:-4},children:Object(a.jsx)(x,{style:{backgroundColor:n.toString()}})}),Object(a.jsx)(m,{children:h&&Object(a.jsx)("div",{ref:p,style:{position:"absolute",left:-60,zIndex:1},children:Object(a.jsx)(j.a,{color:n.hex(),onChange:function(t){t.includes("NaN")||i(f()(t))}})})})]})}var O,x=p.a.div(l||(l=Object(h.a)(["\n  width: 12px;\n  height: 12px;\n"]))),m=p.a.div(u||(u=Object(h.a)(["\n  width: 1px;\n  height: 1px;\n  overflow: visible;\n  position: relative;\n"]))),y=n(37),S=p.a.div(O||(O=Object(h.a)(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n"]))),w=n(41);function k(t){var e=t.label,n=t.value,i=t.onSubmitOrBlur,c=t.style,l=Object(r.useState)(n.x.toString()),u=Object(d.a)(l,2),h=u[0],b=u[1],f=Object(r.useState)(n.y.toString()),j=Object(d.a)(f,2),p=j[0],v=j[1],g=Object(r.useState)(n.z.toString()),O=Object(d.a)(g,2),x=O[0],m=O[1];Object(r.useEffect)((function(){h!=n.x.toString()&&b(n.x.toString()),p!=n.y.toString()&&v(n.y.toString()),x!=n.z.toString()&&m(n.z.toString())}),[n.x,n.y,n.z]);var k=Object(r.useCallback)((function(){b(h||"0"),v(p||"0"),m(x||"0"),n.setX(parseFloat(h||"0")),n.setY(parseFloat(p||"0")),n.setZ(parseFloat(x||"0")),i(n)}),[n,h,p,x,b,v,m]);return Object(a.jsxs)(o.a,{style:c,children:[Object(a.jsx)(s.a,{label:e+" (x, y, z)"}),Object(a.jsxs)(S,{children:[Object(a.jsx)(y.a,{value:h,onChange:function(t){b(Object(w.a)(t))},onSubmit:k,onBlur:k,style:{width:62,maxWidth:62}}),Object(a.jsx)(y.a,{value:p,onChange:function(t){v(Object(w.a)(t))},onSubmit:k,onBlur:k,style:{marginLeft:4,width:62,maxWidth:62}}),Object(a.jsx)(y.a,{value:x,onChange:function(t){m(Object(w.a)(t))},onSubmit:k,onBlur:k,style:{marginLeft:4,width:62,maxWidth:62}})]})]})}function _(t){var e,n,i=t.label,c=t.value,l=t.onSubmitOrBlur,u=t.style,h=Object(r.useState)(c.toString()),b=Object(d.a)(h,2),f=b[0],j=b[1];Object(r.useEffect)((function(){f!=c.toString()&&j(c.toString())}),[c]);var p=Object(r.useCallback)((function(){j(f||"0"),l(parseFloat(f||"0"))}),[c,f,j]);return Object(a.jsxs)(o.a,{style:u,children:[Object(a.jsx)(s.a,{label:i}),Object(a.jsx)(y.a,{value:f,onChange:function(t){j(Object(w.a)(t))},onSubmit:p,onBlur:p,style:{width:null!==(e=null===u||void 0===u?void 0:u.width)&&void 0!==e?e:62,maxWidth:null!==(n=null===u||void 0===u?void 0:u.width)&&void 0!==n?n:62}})]})}},27:function(t,e,n){"use strict";var i=n(82);n.o(i,"Universe")&&n.d(e,"Universe",(function(){return i.Universe})),n.o(i,"UniverseContextProvider")&&n.d(e,"UniverseContextProvider",(function(){return i.UniverseContextProvider})),n.o(i,"useUniverse")&&n.d(e,"useUniverse",(function(){return i.useUniverse}));var r=n(56);n.d(e,"Universe",(function(){return r.a}));var o=n(83);n.d(e,"UniverseContextProvider",(function(){return o.a})),n.d(e,"useUniverse",(function(){return o.b}))},30:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var i,r=n(21),o=n(22).a.div(i||(i=Object(r.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n"])))},31:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var i=n(33),r=n.n(i),o=n(48),s={BLACK:r()("#000000"),DARK:r()("#101113"),LIGHT_GREY:r()("#8C8D8F"),LIGHT:r()("#DCDDDF"),WHITE:r()("#FFFFFF"),random:function(){return r.a.hsv(Object(o.a)(0,360),Object(o.a)(50,100),Object(o.a)(50,100))}}},35:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var i,r=n(21),o=(n(1),n(22)),s=n(31),a=n(7);function c(t){var e=t.label;return e?Object(a.jsx)(l,{children:e}):null}var l=o.a.div(i||(i=Object(r.a)(["\n  color: ",";\n  font-size: 10px;\n"])),s.a.LIGHT.toString())},37:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i=n(11),r=n(1),o=(n(122),n(31)),s=n(7);function a(t){var e=t.value,n=t.onChange,a=t.style,c=t.focusFirstRender,l=t.onSubmit,u=t.onBlur,h=t.ariaLabel,d=Object(r.useRef)(null);return Object(r.useEffect)((function(){var t;c&&(null===(t=d.current)||void 0===t||t.focus())}),[]),Object(s.jsx)("input",{ref:d,value:e,className:"input",onChange:function(t){n(t.target.value)},onBlur:u,onKeyDown:function(t){"Enter"===t.key&&(null===l||void 0===l||l())},"aria-label":h,style:Object(i.a)({flex:1,backgroundColor:o.a.DARK.toString(),borderColor:o.a.LIGHT_GREY.toString(),color:o.a.LIGHT.toString()},a)})}},39:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var i=n(11),r=n(14),o=n(28),s=n(1),a=n(146);var c=n(31),l=n(7);function u(t){var e=t.color,n=void 0===e?c.a.LIGHT:e,u=t.disabled,h=t.style,d=t.children,b=Object(o.a)(t,["color","disabled","style","children"]),f=function(){var t=Object(s.useState)(!1),e=Object(r.a)(t,2),n=e[0],i=e[1],o=Object(s.useRef)(null),a=function(){return i(!0)},c=function(){return i(!1)};return Object(s.useEffect)((function(){var t=o.current;if(t)return t.addEventListener("mouseover",a),t.addEventListener("mouseout",c),function(){t.removeEventListener("mouseover",a),t.removeEventListener("mouseout",c)}}),[]),[o,n]}(),j=Object(r.a)(f,2),p=j[0],v=j[1],g=u?.4:v?.15:0;return Object(l.jsx)(a.a,Object(i.a)(Object(i.a)({style:Object(i.a)({color:null===n||void 0===n?void 0:n.fade(g).toString()},h),ref:p,disabled:u},b),{},{children:d}))}},41:function(t,e,n){"use strict";function i(t){if(!t)return t;var e="-"===t[0],n=t.replace(/[^0-9.]/g,"").split(".");return(e?"-":"")+(n.length>=2?n[0]+"."+n.slice(1).join(""):n[0])}n.d(e,"a",(function(){return i}))},48:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return s}));n(41);function i(t,e){return Math.floor(Math.random()*(e-t)+t)}var r=n(14),o=n(1);function s(){var t=Object(o.useState)({width:window.innerWidth,height:window.innerHeight}),e=Object(r.a)(t,2),n=e[0],i=e[1];return Object(o.useEffect)((function(){function t(){i({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",t),function(){return window.removeEventListener("resize",t)}}),[]),n}},56:function(t,e,n){"use strict";n.d(e,"a",(function(){return S}));var i=n(11),r=n(2),o=n(3),s=n(9),a=n(92),c=n(18),l=n(33),u=n.n(l);function h(t){var e;return[t.id,null!==(e=t.name)&&void 0!==e?e:"",t.color.hex(),t.x0.x.toString(),t.x0.y.toString(),t.x0.z.toString(),t.v0.x.toString(),t.v0.y.toString(),t.v0.z.toString(),t.m.toString(),(+t.frameFollows).toString()].join("_")}function d(t){var e=t.split("_");return{id:e[0],name:e[1]||void 0,color:u()(e[2]),x0:new s.Vector3(parseFloat(e[3]),parseFloat(e[4]),parseFloat(e[5])),v0:new s.Vector3(parseFloat(e[6]),parseFloat(e[7]),parseFloat(e[8])),m:parseFloat(e[9]),frameFollows:Boolean(parseInt(e[10]))}}function b(t,e){return null!==t?parseFloat(t):e}var f=[{stateString:"b0__#23E422_0_0_0_-0.001_0_-0.191_100_0*b1__#0CF2CB_2.03_0_0_0_3_6_1_0*b2__#F74376_1.97_0_0_0_-3_6_1_0*b3__#9E0885_-2_1_0_0_0_7_1_0*b4__#82681F_-2_1_0.012_9_0_7_0.01_0"}],j=function(){function t(e){Object(r.a)(this,t),this.length=e,this.points=void 0,this.V=p.clone(),this.points=[];for(var n=0;n<e;n++)this.points.push([p.clone(),p.clone()])}return Object(o.a)(t,[{key:"setVelocityToZero",value:function(){for(var t=0;t<this.points.length;t++)this.points[t][1].copy(p)}},{key:"setFrom",value:function(t){if(this.points.length<t.length)throw new Error("This system has size ".concat(this.points.length," so cannot hold ").concat(t.length," points"));for(var e=0;e<t.length;e++)this.points[e][0].copy(t[e].x0),this.points[e][1].copy(t[e].v0);return this}},{key:"copy",value:function(t){if(this.points.length<t.points.length)throw new Error("This system has size ".concat(this.points.length," so cannot hold ").concat(t.points.length," points"));for(var e=0;e<t.points.length;e++)this.points[e][0].copy(t.points[e][0]),this.points[e][1].copy(t.points[e][1]);return this}},{key:"add",value:function(t){if(this.points.length!=t.points.length)throw new Error("Systems of different size cannot be added. This size: ".concat(this.points.length,". Other size: ").concat(t.points.length));for(var e=0;e<this.points.length;e++)this.points[e][0].add(t.points[e][0]),this.points[e][1].add(t.points[e][1]);return this}},{key:"addMultiple",value:function(t,e){if(this.points.length!=t.points.length)throw new Error("Systems of different size cannot be added. This size: ".concat(this.points.length,". Other size: ").concat(t.points.length));for(var n=0;n<this.points.length;n++)this.points[n][0].add(this.V.copy(t.points[n][0]).multiplyScalar(e)),this.points[n][1].add(this.V.copy(t.points[n][1]).multiplyScalar(e));return this}},{key:"times",value:function(t){for(var e=0;e<this.points.length;e++)this.points[e][0].multiplyScalar(t),this.points[e][1].multiplyScalar(t);return this}},{key:"maxVelocity",value:function(){if(0===this.points.length)return 0;for(var t=this.points[0][1].length(),e=0;e<this.points.length;e++)t=Math.max(t,this.points[e][1].length());return t}}]),t}(),p=new s.Vector3(0,0,0);function v(t,e,n,i){if(t.length!=e.length||t.length!=n.length)throw new Error("input, masses, and output must all be the same length");var r,o,s=g.clone();n.setVelocityToZero();for(var a=0;a<t.length;a++)for(var c=a+1;c<t.length;c++)s.copy(t.points[c][0]).sub(t.points[a][0]),0!=(r=s.length())&&(o=i/(r*r),s.normalize().multiplyScalar(o*e[c]),n.points[a][1].add(s),s.normalize().multiplyScalar(-o*e[a]),n.points[c][1].add(s));for(var l=0;l<t.length;l++)n.points[l][0].copy(t.points[l][1])}var g=new s.Vector3(0,0,0),O=n(19);var x=new s.Vector3(0,0,0),m=function(){function t(e,n,i){Object(r.a)(this,t),this.maxXStep=n,this.G=i,this.state=void 0,this.masses=void 0,this.paths=void 0,this.k1=void 0,this.k2=void 0,this.k3=void 0,this.k4=void 0,this.s1=void 0,this.s2=void 0,this.s3=void 0,this.O=void 0,this.state=new j(e.length).setFrom(e),this.masses=e.map((function(t){return t.m})),this.paths=e.map((function(t){return[t.x0]})),this.k1=new j(e.length),this.k2=new j(e.length),this.k3=new j(e.length),this.k4=new j(e.length),this.s1=new j(e.length),this.s2=new j(e.length),this.s3=new j(e.length),this.O=new s.Vector3(0,0,0)}return Object(o.a)(t,[{key:"path",value:function(t){for(var e=0;e<t;e++)this.step(),this.appendStateToPaths();return this}},{key:"getPaths",value:function(t){return function(t,e,n){if(0==e.length)return t;var i,r=t.map((function(){return[]})),o=0,s=Object(O.a)(e);try{for(s.s();!(i=s.n()).done;)o+=n[i.value]}catch(b){s.e(b)}finally{s.f()}for(var a=x.clone(),c=0;c<t[0].length;c++){a.copy(x);var l,u=Object(O.a)(e);try{for(u.s();!(l=u.n()).done;){var h=l.value;a.add(t[h][c].clone().multiplyScalar(n[h]))}}catch(b){u.e(b)}finally{u.f()}a.divideScalar(o);for(var d=0;d<t.length;d++)r[d].push(t[d][c].clone().sub(a))}return r}(this.paths,t,this.masses)}},{key:"step",value:function(){var t=this.maxXStep/this.state.maxVelocity();v(this.state,this.masses,this.k1,this.G),this.s1.copy(this.state).addMultiple(this.k1,.5*t),v(this.s1,this.masses,this.k2,this.G),this.s2.copy(this.state).addMultiple(this.k2,.5*t),v(this.s2,this.masses,this.k3,this.G),this.s3.copy(this.state).addMultiple(this.k3,t),v(this.s3,this.masses,this.k4,this.G),this.state.addMultiple(this.k1.addMultiple(this.k2,2).addMultiple(this.k3,2).add(this.k4),t/6)}},{key:"appendStateToPaths",value:function(){for(var t=0;t<this.paths.length;t++)this.paths[t].push(this.state.points[t][0].clone())}}]),t}(),y=n(93),S=function(){function t(e){Object(r.a)(this,t),this.render=e,this.state0=[],this.state=[],this.t=0,this.pathingDepth=5e3,this.pathingStepSize=.001,this.bodyIdCounter=0,this.setFromUrl(),this.setToInitialState(),this.calculatePaths(),Object(a.a)(this)}return Object(o.a)(t,[{key:"addBody",value:function(t){this.state0.push(Object(i.a)(Object(i.a)({x0:new s.Vector3(0,0,0),v0:new s.Vector3(0,0,0),m:0,color:c.c.random(),frameFollows:!1},t),{},{id:"b".concat(this.bodyIdCounter)})),this.bodyIdCounter+=1,this.updateUrl()}},{key:"removeBody",value:function(t){this.state0=this.state0.filter((function(e){return e.id!==t})),this.updateUrl()}},{key:"setInitial",value:function(t,e,n){var i=this.state0.find((function(t){return t.id===e}));i&&(i[t]=n),this.updateUrl()}},{key:"updateUrl",value:function(){var t,e,n=new URL(window.location.toString());n.searchParams.set("bodies",(t=this.state0,e=h,t.map(e).join("*"))),n.searchParams.set("pathingStepSize",this.pathingStepSize.toString()),n.searchParams.set("pathingDepth",this.pathingDepth.toString()),window.history.pushState({},"",n)}},{key:"setInitialStateFromString",value:function(t){this.state0=function(t,e){var n;return null!==(n=null===t||void 0===t?void 0:t.split("*").map(e))&&void 0!==n?n:[]}(t,d),this.bodyIdCounter=this.state0.length}},{key:"setFromUrl",value:function(){var t=new URLSearchParams(window.location.search);this.setInitialStateFromString(t.get("bodies")),0===this.state0.length&&this.setInitialStateFromString(f[0].stateString),this.pathingStepSize=b(t.get("pathingStepSize"),3e-4),this.pathingDepth=b(t.get("pathingDepth"),1e5)}},{key:"update",value:function(){this.setToInitialState(),this.calculatePaths(),this.updateUrl(),this.render()}},{key:"setToInitialState",value:function(){this.state=this.state0.map((function(t){return Object(i.a)(Object(i.a)({},t),{},{x:t.x0,v:t.v0,path:[]})}))}},{key:"calculatePaths",value:function(){var t=this;new m(this.state0,this.pathingStepSize,1).path(this.pathingDepth).getPaths(this.state0.map((function(t,e){return t.frameFollows?e:void 0})).filter(y.isPresent)).forEach((function(e,n){t.state[n].path=e}))}}]),t}()},82:function(t,e){},83:function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return c}));var i=n(1),r=n(56),o=n(7),s=Object(i.createContext)(new r.a((function(){})));function a(t){var e=t.children,n=t.universe;return Object(o.jsx)(s.Provider,{value:n,children:e})}function c(){return Object(i.useContext)(s)}}},[[127,1,2]]]);
//# sourceMappingURL=main.bd0b212f.chunk.js.map