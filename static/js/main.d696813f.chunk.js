(this.webpackJsonpgravity=this.webpackJsonpgravity||[]).push([[0],{55:function(t,e,n){},63:function(t,e,n){},70:function(t,e,n){"use strict";n.r(e);var i=n(4),a=n.n(i),r=n(44),o=n.n(r),c=(n(55),n(13)),l=n(11),s=n(7),u=n(23),d=n.n(u);function b(t,e){return Math.floor(Math.random()*(e-t)+t)}var j={BLACK:d()("#000000"),DARK:d()("#101113"),LIGHT:d()("#DCDDDF"),WHITE:d()("#FFFFFF"),random:function(){return d.a.hsv(b(0,360),b(50,100),b(50,100))}},h=n(9),f=(n(63),n(8));function x(t){var e=t.value,n=t.onChange,a=t.style,r=t.focusFirstRender,o=t.onSubmit,c=t.onBlur,l=t.ariaLabel,s=Object(i.useRef)(null);return Object(i.useEffect)((function(){var t;r&&(null===(t=s.current)||void 0===t||t.focus())}),[]),Object(f.jsx)("input",{ref:s,value:e,className:"input",onChange:function(t){n(t.target.value)},onBlur:c,onKeyDown:function(t){"Enter"===t.key&&(null===o||void 0===o||o())},"aria-label":l,style:Object(h.a)({flex:1,backgroundColor:j.DARK.toString(),borderColor:j.LIGHT.fade(.5).toString(),color:j.LIGHT.toString()},a)})}var v,p,O=n(17),g=n(18),m=g.a.div(v||(v=Object(O.a)(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n"])));function S(t){if(!t)return t;var e="-"===t[0],n=t.replace(/[^0-9.]/g,"").split(".");return(e?"-":"")+(n.length>=2?n[0]+"."+n.slice(1).join(""):n[0])}var y,w=g.a.div(p||(p=Object(O.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n"])));function B(t){var e=t.label;return e?Object(f.jsx)(z,{children:e}):null}var C,z=g.a.div(y||(y=Object(O.a)(["\n  color: ",";\n  font-size: 10px;\n"])),j.LIGHT.toString());function I(t){var e=t.label,n=t.value,a=t.onSubmitOrBlur,r=t.style,o=Object(i.useState)(n.x.toString()),l=Object(c.a)(o,2),s=l[0],u=l[1],d=Object(i.useState)(n.y.toString()),b=Object(c.a)(d,2),j=b[0],h=b[1],v=Object(i.useState)(n.z.toString()),p=Object(c.a)(v,2),O=p[0],g=p[1];Object(i.useEffect)((function(){s!=n.x.toString()&&u(n.x.toString()),j!=n.y.toString()&&h(n.y.toString()),O!=n.z.toString()&&g(n.z.toString())}),[n.x,n.y,n.z]);var y=Object(i.useCallback)((function(){u(s||"0"),h(j||"0"),g(O||"0"),n.setX(parseFloat(s||"0")),n.setY(parseFloat(j||"0")),n.setZ(parseFloat(O||"0")),a(n)}),[n,s,j,O,u,h,g]);return Object(f.jsxs)(w,{style:r,children:[Object(f.jsx)(B,{label:e+" (x, y, z)"}),Object(f.jsxs)(m,{children:[Object(f.jsx)(x,{value:s,onChange:function(t){u(S(t))},onSubmit:y,onBlur:y,style:{width:62,maxWidth:62}}),Object(f.jsx)(x,{value:j,onChange:function(t){h(S(t))},onSubmit:y,onBlur:y,style:{marginLeft:4,width:62,maxWidth:62}}),Object(f.jsx)(x,{value:O,onChange:function(t){g(S(t))},onSubmit:y,onBlur:y,style:{marginLeft:4,width:62,maxWidth:62}})]})]})}function L(t){var e,n,a=t.label,r=t.value,o=t.onSubmitOrBlur,l=t.style,s=Object(i.useState)(r.toString()),u=Object(c.a)(s,2),d=u[0],b=u[1];Object(i.useEffect)((function(){d!=r.toString()&&b(r.toString())}),[r]);var j=Object(i.useCallback)((function(){b(d||"0"),o(parseFloat(d||"0"))}),[r,d,b]);return Object(f.jsxs)(w,{style:l,children:[Object(f.jsx)(B,{label:a}),Object(f.jsx)(x,{value:d,onChange:function(t){b(S(t))},onSubmit:j,onBlur:j,style:{width:null!==(e=null===l||void 0===l?void 0:l.width)&&void 0!==e?e:62,maxWidth:null!==(n=null===l||void 0===l?void 0:l.width)&&void 0!==n?n:62}})]})}g.a.div(C||(C=Object(O.a)(["\n  color: ",";\n  font-size: 10px;\n"])),j.LIGHT.toString());function F(t){var e=t.points,n=t.color,a=void 0===n?j.random():n,r=Object(i.useRef)(new s.BufferGeometry).current;return r.setFromPoints(e),Object(f.jsx)("line_",{geometry:r,children:Object(f.jsx)("lineBasicMaterial",{attach:"material",color:a.toString(),linewidth:10,linecap:"round",linejoin:"round"})})}Object(l.h)({Line_:s.Line});var k=n(0),H=n(3),D=n(48),T=function(){function t(e){Object(k.a)(this,t),this.render=e,this.state0=[],this.state=[],this.t=0,this.pathingDepth=4e4,this.pathingStepSize=.001,this.bodyIdCounter=0,console.log("Constructing a universe"),this.addBody({x0:new s.Vector3(0,0,0),v0:new s.Vector3(0,0,-.12),m:100}),this.addBody({x0:new s.Vector3(2.05,0,0),v0:new s.Vector3(0,1,6),m:1}),this.addBody({x0:new s.Vector3(1.95,0,0),v0:new s.Vector3(0,-1,6),m:1}),this.setToInitialState(),this.calculatePaths(),Object(D.a)(this)}return Object(H.a)(t,[{key:"addBody",value:function(t){this.state0.push(Object(h.a)(Object(h.a)({},t),{},{id:"b".concat(this.bodyIdCounter)})),this.bodyIdCounter+=1}},{key:"setInitialMass",value:function(t,e){var n=this.state0.find((function(e){return e.id=t}));n&&(n.m=e)}},{key:"update",value:function(){this.setToInitialState(),this.calculatePaths(),this.render()}},{key:"setToInitialState",value:function(){this.state=this.state0.map((function(t){return Object(h.a)(Object(h.a)({},t),{},{x:t.x0,v:t.v0,path:[t.x0]})}))}},{key:"calculatePaths",value:function(){for(var t,e,n=this.state.map((function(t){return{x:t.x.clone(),v:t.v.clone(),m:t.m}})),i=new s.Vector3(0,0,0),a=0;a<this.pathingDepth;a++){for(var r=0;r<n.length;r++)for(var o=r+1;o<n.length;o++)i.copy(n[o].x).sub(n[r].x),e=i.length(),t=1*this.pathingStepSize/(e*e),i.normalize().multiplyScalar(t*n[o].m),n[r].v.add(i),i.normalize().multiplyScalar(-t*n[r].m),n[o].v.add(i),i.copy(n[r].v).multiplyScalar(this.pathingStepSize),n[r].x.add(i),i.copy(n[o].v).multiplyScalar(this.pathingStepSize),n[o].x.add(i);for(var c=0;c<n.length;c++)this.state[c].path.push(n[c].x.clone())}}}]),t}(),E=Object(i.createContext)(new T((function(){})));function G(t){var e=t.children,n=t.universe;return Object(f.jsx)(E.Provider,{value:n,children:e})}function P(){return Object(i.useContext)(E)}function V(){var t=P();return console.log("Content"),Object(f.jsx)(f.Fragment,{children:t.state.map((function(t,e){return Object(f.jsx)(F,{points:t.path},e)}))})}var M,R,W=n(28),K=function(){return Object(f.jsx)(f.Fragment,{children:Object(f.jsx)("ambientLight",{intensity:1})})},A=n(73);function J(t){var e=t.children;return Object(f.jsx)("div",{style:{position:"absolute",left:0,right:0,top:0,bottom:0},children:Object(f.jsxs)(W.a,{style:{background:j.BLACK.toString()},camera:{position:[0,5,0]},shadows:!0,children:[Object(f.jsx)("gridHelper",{args:[20,20]}),Object(f.jsx)(K,{}),e,Object(f.jsx)(A.a,{autoRotate:!1})]})})}function _(){var t=P();return Object(f.jsxs)(Y,{style:{color:j.LIGHT.toString(),fontSize:12},children:["Initial state:",t.state.map((function(e,n){return Object(f.jsxs)(Z,{children:[e.name||"Body ".concat(n+1),Object(f.jsx)(I,{label:"Position",value:e.x,onSubmitOrBlur:t.update}),Object(f.jsx)(I,{label:"Velocity",value:e.v,onSubmitOrBlur:t.update}),Object(f.jsx)(L,{label:"Mass",value:e.m,onSubmitOrBlur:function(n){t.setInitialMass(e.id,n),t.update()}})]},e.id)}))]})}var N,X,Y=g.a.div(M||(M=Object(O.a)(["\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n"]))),Z=g.a.div(R||(R=Object(O.a)(["\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n  margin-left: 8px;\n"])));function q(){var t=P();return Object(f.jsxs)(U,{style:{color:j.LIGHT.toString(),fontSize:12},children:["Path extrapolation parameters:",Object(f.jsxs)($,{children:[Object(f.jsx)(L,{label:"Pathing depth",value:t.pathingDepth,onSubmitOrBlur:function(e){t.pathingDepth=e,t.update()}}),Object(f.jsx)(L,{label:"Step size",value:t.pathingStepSize,onSubmitOrBlur:function(e){t.pathingStepSize=e,t.update()}})]})]})}var Q,U=g.a.div(N||(N=Object(O.a)(["\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n"]))),$=Object(g.a)(m)(X||(X=Object(O.a)(["\n  gap: 4px;\n  margin-left: 8px;\n"])));function tt(){var t=function(){var t=Object(i.useState)({width:window.innerWidth,height:window.innerHeight}),e=Object(c.a)(t,2),n=e[0],a=e[1];return Object(i.useEffect)((function(){function t(){a({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",t),function(){return window.removeEventListener("resize",t)}}),[]),n}().height;return Object(f.jsxs)(et,{style:{maxHeight:t-32},children:[Object(f.jsx)(_,{}),Object(f.jsx)(q,{})]})}var et=g.a.div(Q||(Q=Object(O.a)(["\n  position: absolute;\n  top: 16px;\n  right: 16px;\n  width: 240px;\n  min-height: 100px;\n  background-color: ",";\n  border: 1px solid ",";\n  overflow-y: auto;\n  overflow-x: hidden;\n  scroll-behaviour: smooth;\n  padding: 12px;\n  display: flex;\n  flex-direction: column;\n  gap: 32px;\n"])),j.DARK.toString(),j.LIGHT.toString());var nt=function(){var t=Object(i.useState)(!1),e=Object(c.a)(t,2),n=(e[0],e[1]),a=Object(i.useCallback)((function(){return n((function(t){return!t}))}),[]),r=Object(i.useState)((function(){return new T(a)})),o=Object(c.a)(r,1)[0];return Object(f.jsx)(f.Fragment,{children:Object(f.jsxs)(G,{universe:o,children:[Object(f.jsx)(J,{children:Object(f.jsx)(V,{})}),Object(f.jsx)(tt,{})]})})};o.a.render(Object(f.jsx)(a.a.StrictMode,{children:Object(f.jsx)(nt,{})}),document.getElementById("root"))}},[[70,1,2]]]);
//# sourceMappingURL=main.d696813f.chunk.js.map